<import src="/template/topnavs/topnavs.wxml" />
<import src="/template/empty/empty.wxml" />

<view class="container withTopnavs" wx:if="{{ready}}">

  <template is="topnavs" data="{{...topnavs}}" />

  <view class="trades">
    <block wx:for="{{trades}}" wx:key="" wx:for-item="trade">
      <view class="trade">
        <view class="trade-info">
          <view class="trade-labels">
            <view class="trade-label tid">订单号：{{trade.id}}</view>
            <view class="trade-label time gray">{{trade.time}}</view>
          </view>
          <view class="trade-labels">
            <view class="trade-label">{{trade.txtStatus}}</view>
          </view>
        </view>
        <view class="trade-orders">
          <block wx:for="{{trade.orders}}" wx:key="" wx:for-item="order">
            <view class="trade-order">
              <view class="item-image">
                <image src="{{order.image + youImageMode_v2}}" mode="aspectFill" />
              </view>
              <view class="item-text">
                <view class="item-title">{{order.title}}</view>
                <view class="item-descs gray">{{order.descs || order.title + '(500克)'}}</view>
              </view>
              <view class="item-price">￥{{order.price}}</view>
              <view class="item-numbers">
                <view class="item-number" wx:if="{{order.realNum==0}}">
                  <view class="item-number-label">{{order.num}}</view>
                </view>
                <view class="item-number" wx:if="{{order.realNum>0}}">
                  <view class="item-number-label gray">{{order.num}}</view>
                  <view class="item-number-label">{{order.realNum}}</view>
                </view>
              </view>
            </view>
          </block>
        </view>
        <view class="trade-counts">
          <view class="trade-count" wx:if="{{trade.status=='买家提交'}}">
            <view class="trade-count-col">合计 数量：{{trade.num}}</view>
            <view class="trade-count-col">金额：￥{{trade.amount}}</view>
          </view>
          <view class="trade-count" wx:if="{{trade.status!='买家提交'}}">
            <view class="trade-count-col">合计 数量：{{trade.realNum}}</view>
            <view class="trade-count-col">金额：￥{{trade.realAmount}}</view>
          </view>
        </view>
      </view>
    </block>
  </view>

  <template is="empty" data="{{show: !trades.length, message: '暂时没有订单'}}" />

</view>